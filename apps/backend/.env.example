# ================================================
# TRAINING MANAGEMENT SYSTEM - ENVIRONMENT CONFIG
# ================================================
#
# IMPORTANT: This is an example file. Copy this to .env and update with your values.
# NEVER commit your actual .env file to version control!
#
# For production deployment:
# 1. Run: ./scripts/generate-secrets.sh to generate secure secrets
# 2. Set NODE_ENV=production
# 3. Configure production database URL
# 4. Disable BYPASS_AUTH
# 5. Configure ALLOWED_ORIGINS for your domain
# ================================================

# ================================================
# SERVER CONFIGURATION
# ================================================
PORT=4000
NODE_ENV=development  # PRODUCTION: Set to 'production'
API_URL=http://localhost:4000  # PRODUCTION: Your API domain
FRONTEND_URL=http://localhost:5173  # PRODUCTION: Your frontend domain

# ================================================
# DATABASE
# ================================================
# Development example:
DATABASE_URL=postgresql://user:password@localhost:5432/tms_dev

# Production examples:
# DATABASE_URL=postgresql://user:password@production-db:5432/tms_production
# DATABASE_URL=postgresql://user:password@db.example.com:5432/tms?ssl=true&sslmode=require

# ================================================
# SECURITY SECRETS
# ================================================
# ⚠️  CRITICAL: Generate strong secrets for production!
# Run: ./scripts/generate-secrets.sh
#
# Requirements:
# - Must be at least 32 characters in production
# - Use cryptographically secure random strings
# - Different for each environment
# - Never use the example values below

JWT_SECRET=your-super-secret-jwt-key-change-this-min-32-characters
SESSION_SECRET=your-super-secret-session-key-change-this-min-32-characters
CSRF_SECRET=csrf-dev-secret-change-in-production

# ================================================
# DEVELOPMENT SETTINGS
# ================================================
# ⚠️  DANGER: Only use in development! Never set to 'true' in production!
# This bypasses authentication for testing purposes
BYPASS_AUTH=false

# Logging level (debug, info, warn, error)
LOG_LEVEL=info  # PRODUCTION: Set to 'warn' or 'error'

# ================================================
# CORS CONFIGURATION
# ================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# PRODUCTION: Your actual domain(s)
# ALLOWED_ORIGINS=https://your-domain.com,https://app.your-domain.com

# ================================================
# REDIS (for SSO sessions)
# ================================================
REDIS_URL=redis://localhost:6379

# PRODUCTION: Use your Redis instance
# REDIS_URL=redis://user:password@redis-host:6379
# REDIS_URL=rediss://user:password@redis-host:6380  # SSL/TLS

# ================================================
# SAML SSO CONFIGURATION (Optional)
# ================================================
SAML_ENABLED=false  # Set to 'true' to enable SSO

# Azure AD example:
# SAML_ENTRY_POINT=https://login.microsoftonline.com/your-tenant-id/saml2
# SAML_ISSUER=urn:your-app-name:saml
# SAML_CALLBACK_URL=https://your-domain.com/auth/saml/callback

# Okta example:
# SAML_ENTRY_POINT=https://your-org.okta.com/app/your-app-id/sso/saml
# SAML_ISSUER=http://www.okta.com/your-app-id
# SAML_CALLBACK_URL=https://your-domain.com/auth/saml/callback

# IdP Certificate (required if SAML_ENABLED=true)
SAML_CERT="-----BEGIN CERTIFICATE-----
Paste your IdP certificate here (no line breaks)
-----END CERTIFICATE-----"

# Optional: Service Provider private key (for signed requests)
# SAML_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour private key\n-----END PRIVATE KEY-----"

# ================================================
# OPTIONAL: RATE LIMITING
# ================================================
# Override default rate limits (optional)
# AUTH_RATE_LIMIT_MAX=5  # Max auth attempts per window
# API_RATE_LIMIT_MAX=100  # Max API requests per window
# MUTATION_RATE_LIMIT_MAX=50  # Max mutation requests per window
